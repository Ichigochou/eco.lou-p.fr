var ln=function(){var c=Error();if(!c.stack)try{throw c;}catch(d){if(!d.stack)return 0}var c=c.stack.toString().split(/\r\n|\n/),a=/:(\d+):(?:\d+)[^\d]*$/;do var b=c.shift();while(!a.exec(b)&&c.length);return a.exec(c.shift())[1]},waitLoader=function(c){return{step:0,addStep:function(a){this.step+=void 0===a?1:a},completeStep:function(a){this.step-=void 0===a?1:a;0>=this.step&&c()},addStepClosure:function(a){a=void 0===a?console.log:a;var b=this;this.addStep();return function(c){for(var d=[],e=0;e<
arguments.length;++e)d[e-0]=arguments[e];a.apply(d);b.completeStep()}}}},ecoApi={get:function(c,a,b){a=void 0===a?{}:a;b=void 0===b?ecoApi.log:b;this.log(ln());$.post("/api/v1/get/"+c,a,function(a){ecoApi.log(ln(),a);b(this.safelyParseJSON(a))},"json").fail(function(){ecoApi.warn(ln());b(!1)})},push:function(c,a,b){this.log(ln());$.post("/api/v1/push/"+c,a,function(a){this.log(ln(),a);b(this.safelyParseJSON(a))}).fail(function(){this.warn(ln(),response);b(!1)})},requireJS:function(c,a){var b=document.createElement("script");
b.src=c;b.onload=a;b.onreadystatechange=a;document.body.appendChild(b)},safelyParseJSON:function(c){var a;try{a=JSON.parse(c)}catch(b){console.warn("JSON.parse(json) failed")}return"undefined"==typeof a?!1:a},guid:function(){function c(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c()},log:function(c){for(var a=[],b=0;b<arguments.length;++b)a[b-0]=arguments[b];-1!=window.location.host.indexOf("dev-")&&(isNaN(parseInt(a[0]))||
(a[0]="ecoApi.js : line "+a[0]+" | ecoApi."+this.log.caller.name+"()"),console.log.apply(console,a))},info:function(c){for(var a=[],b=0;b<arguments.length;++b)a[b-0]=arguments[b];-1!=window.location.host.indexOf("dev-")&&(isNaN(parseInt(a[0]))||(a[0]="ecoApi.js : line "+a[0]+" | ecoApi."+this.info.caller.name+"()"),console.info.apply(console,a))},warn:function(c){for(var a=[],b=0;b<arguments.length;++b)a[b-0]=arguments[b];-1!=window.location.host.indexOf("dev-")&&(isNaN(parseInt(a[0]))||(a[0]="ecoApi.js : line "+
a[0]+" | ecoApi."+this.warn.caller.name+"()"),console.warn.apply(console,a))}};
